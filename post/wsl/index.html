<!DOCTYPE html>
<html><head>
<title>Win10 下 Linux 子系统 (WSL) 配置小记</title>




<meta charset="utf-8">
<meta name="X-UA-Compatible" content="IE=edge">
<meta name="google-site-verification" content="">
<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
<meta content="telephone=no" name="format-detection">
<meta name="description" content="">
<meta name="renderer" content="webkit">
<meta name="theme-color" content="#ffffff">



<meta property="og:title" content="Win10 下 Linux 子系统 (WSL) 配置小记" />
<meta property="og:description" content="网络代理配置 刚开始用 apt-get 就被卡到。
WSL1 的时候，Linux 子系统和 Windows 主机是共享一个 localhost 的。WSL2 由于通过虚拟机实现，若要访问 Windows 主机的网络，需要使用主机的 IP 地址（IP 地址可以用 ipconfig 命令查看）。
WSL2 环境变量配置 如果是 V2rayX 的话，默认 socks5 端口是 10808，默认 http 端口是 10809。
如果是 Clash for Windows 的话，默认 socks5 端口是 7891，默认 http 端口是 7890。
以个人经验教训来说，http 和 socks5 两种代理方式可以都尝试一下。
export http_proxy = &#34;socks5://&lt;windows_ip&gt;:&lt;socks5_port&gt;&#34; export https_proxy = &#34;socks5://&lt;windows_ip&gt;:&lt;socks5_port&gt;&#34; git 也可以设置使用代理。
git config --global http.proxy &#34;socks5://&lt;windows_ip&gt;:&lt;socks5_port&gt;&#34; git config --global https.proxy &#34;socks5://&lt;windows_ip&gt;:&lt;socks5_port&gt;&#34; 当然，如果希望每次启动的时候代理配置都生效，可以写入 ~/.bashrc 文件中。
顺便一提查看 git 全局配置的命令是：" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://imfaye.me/post/wsl/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2021-03-21T20:29:24+00:00" />
<meta property="article:modified_time" content="2021-03-21T20:29:24+00:00" /><meta property="og:site_name" content="My Blog" />






<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Win10 下 Linux 子系统 (WSL) 配置小记"/>
<meta name="twitter:description" content="网络代理配置 刚开始用 apt-get 就被卡到。
WSL1 的时候，Linux 子系统和 Windows 主机是共享一个 localhost 的。WSL2 由于通过虚拟机实现，若要访问 Windows 主机的网络，需要使用主机的 IP 地址（IP 地址可以用 ipconfig 命令查看）。
WSL2 环境变量配置 如果是 V2rayX 的话，默认 socks5 端口是 10808，默认 http 端口是 10809。
如果是 Clash for Windows 的话，默认 socks5 端口是 7891，默认 http 端口是 7890。
以个人经验教训来说，http 和 socks5 两种代理方式可以都尝试一下。
export http_proxy = &#34;socks5://&lt;windows_ip&gt;:&lt;socks5_port&gt;&#34; export https_proxy = &#34;socks5://&lt;windows_ip&gt;:&lt;socks5_port&gt;&#34; git 也可以设置使用代理。
git config --global http.proxy &#34;socks5://&lt;windows_ip&gt;:&lt;socks5_port&gt;&#34; git config --global https.proxy &#34;socks5://&lt;windows_ip&gt;:&lt;socks5_port&gt;&#34; 当然，如果希望每次启动的时候代理配置都生效，可以写入 ~/.bashrc 文件中。
顺便一提查看 git 全局配置的命令是："/>










  




<link rel="icon" href="https://imfaye.me/img/wind.png">



      <script src="/js/toc.js"></script>
    
    <link type="text/css" rel="stylesheet" href="/vendor/css/bootstrap.min.css">
<link rel="stylesheet" href="/scss/journal.min.d4c42cc03dd5885ad6a856f72cdc8991e948d78f13915e5ad7a9ea75041f0501.css" integrity="sha256-1MQswD3ViFrWqFb3LNyJkelI148TkV5a16nqdQQfBQE=" media="screen">



<link rel="stylesheet" href="/scss/dark-mode.min.b063970adbc0451db461a3b3a99c3ac07ae784200123238e4bc8fc340e6b69ce.css" integrity="sha256-sGOXCtvARR20YaOzqZw6wHrnhCABIyOOS8j8NA5rac4=" media="screen">


<link rel="stylesheet"
          href="https://fonts.googleapis.com/css?family=Material+Icons">




<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.13/dist/katex.min.css" integrity="sha384-RZU/ijkSsFbcmivfdRBQDtwuwVqK7GMOw6IMvKyeWL2K5UAlyp6WonmB8m7Jd0Hn" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.13/dist/katex.min.js" integrity="sha384-pK1WpvzWVBQiP0/GjnvRxV4mOb0oxFuyRxJlk6vVw146n3egcN5C925NCP7a7BY8" crossorigin="anonymous"></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.13/dist/contrib/auto-render.min.js" integrity="sha384-vZTG03m+2yp6N6BNi5iM4rW4oIwk5DfcNdFfxkk9ZWpDriOkXX8voJBFrAO7MpVl" crossorigin="anonymous"></script>
<script>
    document.addEventListener("DOMContentLoaded", function() {
        renderMathInElement(document.body, {
          
          
          delimiters: [
              {left: '$$', right: '$$', display: true},
              {left: '$', right: '$', display: false},
              {left: '\\(', right: '\\)', display: false},
              {left: '\\[', right: '\\]', display: true}
          ],
          
          throwOnError : false
        });
    });
</script>
















</head>
<body>
    	<div id="app"><div id="sideContainer" class="side-container">
    
    <a class="a-block nav-head false" href="https://imfaye.me/">
    
        <div class="nav-title">
            著花未
        </div>
        
        <div class="nav-subtitle">
            陈列一些废话和一些想记下的
        </div>
        
    </a>

    <div class="nav-link-list">
        
        
            
            
            
            
            
            <a class="a-block nav-link-item false" href="/posts">
                归档
            </a>
            
        
            
            
            
            
            
            <a class="a-block nav-link-item false" href="/categories">
                分类
            </a>
            
        
            
            
            
            
            
            <a class="a-block nav-link-item false" href="/tags">
                标签
            </a>
            
        
            
            
            
            
            
            <a class="a-block nav-link-item false" href="/about">
                关于
            </a>
            
        
            
            
            
            
            
            <a class="a-block nav-link-item false" href="/index.xml">
                RSS
            </a>
            
        
    </div>

    

    <div class="nav-footer">
        
Hugo Theme <a href="https://github.com/amazingrise/hugo-theme-diary">Diary</a> by <a href="https://risehere.net/">Rise</a>
<br>
移植自 <a href="https://mak1t0.cc/" target="_blank" rel="noreferrer noopener">Makito</a>'s <a href="https://github.com/SumiMakito/hexo-theme-journal/" target="_blank" rel="noreferrer noopener">Journal.</a> <br>
<br>

&copy;
	
	Faye
	

    </div>
    
</div><div id="extraContainer" class="extra-container">
    
    
    <div class="toc animated-visibility" :class="{ invisible: scrollY <= 140 }">


	<div class="toc-content">
	
		
		
		
		<center>- 目录 -</center>
		
		
		<ul>
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#%e7%bd%91%e7%bb%9c%e4%bb%a3%e7%90%86%e9%85%8d%e7%bd%ae" onclick="onNavClick(`#网络代理配置-nav`)" id="网络代理配置-nav">
									网络代理配置
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#wsl2-%e7%8e%af%e5%a2%83%e5%8f%98%e9%87%8f%e9%85%8d%e7%bd%ae" onclick="onNavClick(`#wsl2-环境变量配置-nav`)" id="wsl2-环境变量配置-nav">
									WSL2 环境变量配置
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#v2ray-%e9%85%8d%e7%bd%ae" onclick="onNavClick(`#v2ray-配置-nav`)" id="v2ray-配置-nav">
									V2ray 配置
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#%e9%bb%98%e8%ae%a4-shell-%e8%ae%be%e7%bd%ae" onclick="onNavClick(`#默认-shell-设置-nav`)" id="默认-shell-设置-nav">
									默认 shell 设置
								</a>
							</li>
						
						
					
				
			
		</ul>
	</div>

</div>
    
    <div class="pagination">
        <a id="globalBackToTop" class="pagination-action animated-visibility" href="#top" :class="{ invisible: scrollY == 0 }">
            <i class="material-icons pagination-action-icon">
                keyboard_arrow_up
            </i>
        </a>
        
        <a type="button" class="pagination-action" id="darkModeToggleButton">
            <span class="material-icons pagination-action-icon" id="darkModeToggleIcon">
                dark_mode
            </span>
        </a>
        
        
    </div>
</div>
<div class="single-column-drawer-container" id="drawer"
     v-bind:class="{ 'single-column-drawer-container-active': isDrawerOpen }">
    <div class="drawer-content">
        <div class="drawer-menu">
            
            
            
                
                
                
                
                
                <a class="a-block drawer-menu-item false" href="/posts">
                    归档
                </a>
                
            
                
                
                
                
                
                <a class="a-block drawer-menu-item false" href="/categories">
                    分类
                </a>
                
            
                
                
                
                
                
                <a class="a-block drawer-menu-item false" href="/tags">
                    标签
                </a>
                
            
                
                
                
                
                
                <a class="a-block drawer-menu-item false" href="/about">
                    关于
                </a>
                
            
                
                
                
                
                
                <a class="a-block drawer-menu-item false" href="/index.xml">
                    RSS
                </a>
                
            
            
            <div class="toc">


	<div class="toc-content">
	
		
		
		
		<center>- 目录 -</center>
		
		
		<ul>
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#%e7%bd%91%e7%bb%9c%e4%bb%a3%e7%90%86%e9%85%8d%e7%bd%ae" onclick="onNavClick(`#网络代理配置-nav`)" id="网络代理配置-nav">
									网络代理配置
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#wsl2-%e7%8e%af%e5%a2%83%e5%8f%98%e9%87%8f%e9%85%8d%e7%bd%ae" onclick="onNavClick(`#wsl2-环境变量配置-nav`)" id="wsl2-环境变量配置-nav">
									WSL2 环境变量配置
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#v2ray-%e9%85%8d%e7%bd%ae" onclick="onNavClick(`#v2ray-配置-nav`)" id="v2ray-配置-nav">
									V2ray 配置
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#%e9%bb%98%e8%ae%a4-shell-%e8%ae%be%e7%bd%ae" onclick="onNavClick(`#默认-shell-设置-nav`)" id="默认-shell-设置-nav">
									默认 shell 设置
								</a>
							</li>
						
						
					
				
			
		</ul>
	</div>

</div>
            
        </div>
    </div>
</div>
<transition name="fade">
    <div id="drawer-mask" v-bind:class="{ 'single-column-drawer-mask': mounted }" v-if="isDrawerOpen" v-on:click="toggleDrawer"></div>
</transition>
<nav id="navBar" class="navbar sticky-top navbar-light single-column-nav-container">
    <div id="navBackground" class="nav-background"></div>
    <div class="container container-narrow nav-content">
        <button id="nav_dropdown_btn" class="nav-dropdown-toggle" type="button" v-on:click="toggleDrawer">
            <i class="material-icons">
                menu
            </i>
        </button>
        <a id="navTitle" class="navbar-brand" href="https://imfaye.me/">
            著花未
        </a>
        
        <button type="button" class="nav-darkmode-toggle" id="darkModeToggleButton2">
            <i class="material-icons" id="darkModeToggleIcon2">
                dark_mode
            </i>
        </button>
        
    </div>
</nav>
<div class="single-column-header-container" id="pageHead"
     v-bind:style="{ transform: 'translateZ(0px) translateY('+.3*scrollY+'px)', opacity: 1-navOpacity }">
    <a href="https://imfaye.me/">
        <div class="single-column-header-title">著花未</div>
        
        <div class="single-column-header-subtitle">陈列一些废话和一些想记下的</div>
        

    </a>
</div>

            <div id="content">
                <div id="streamContainer" class="stream-container">

    <div class="post-list-container post-list-container-shadow">
        <div class="post">
            
            
            

            <div class="post-head-wrapper-text-only"
                
            >
                <div class="post-title">
                    Win10 下 Linux 子系统 (WSL) 配置小记
                    
                    <div class="post-meta">
                        
                        <time itemprop="datePublished">
                            2021-03-21 20:29
                        </time>
                        

                        
                            <i class="material-icons" style="">folder</i>
                                <a href="/categories/">[折腾]</a>
                                &nbsp;
                        

                        
                            <i class="material-icons" style="">label</i>
                            
                                <a href="/tags/wsl">WSL</a>
                                &nbsp;
                            
                        
                        
                    </div>
                </div>
            </div>
            
            <div class="post-body-wrapper">
                
                <div class="post-body" v-pre>
                
                    <h2 id="网络代理配置">网络代理配置</h2>
<p>刚开始用 <code>apt-get</code> 就被卡到。</p>
<p>WSL1 的时候，Linux 子系统和 Windows 主机是共享一个 localhost 的。WSL2 由于通过虚拟机实现，若要访问 Windows 主机的网络，需要使用主机的 IP 地址（IP 地址可以用 <code>ipconfig</code> 命令查看）。</p>
<h3 id="wsl2-环境变量配置">WSL2 环境变量配置</h3>
<p>如果是 V2rayX 的话，默认 socks5 端口是 10808，默认 http 端口是 10809。</p>
<p>如果是 Clash for Windows 的话，默认 socks5 端口是 7891，默认 http 端口是 7890。</p>
<p>以个人经验教训来说，http 和 socks5 两种代理方式可以都尝试一下。</p>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#658b00">export</span> <span style="color:#00688b">http_proxy</span> = <span style="color:#cd5555">&#34;socks5://&lt;windows_ip&gt;:&lt;socks5_port&gt;&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#658b00">export</span> <span style="color:#00688b">https_proxy</span> = <span style="color:#cd5555">&#34;socks5://&lt;windows_ip&gt;:&lt;socks5_port&gt;&#34;</span>
</span></span></code></pre></div><p>git 也可以设置使用代理。</p>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>git config --global http.proxy <span style="color:#cd5555">&#34;socks5://&lt;windows_ip&gt;:&lt;socks5_port&gt;&#34;</span>
</span></span><span style="display:flex;"><span>git config --global https.proxy <span style="color:#cd5555">&#34;socks5://&lt;windows_ip&gt;:&lt;socks5_port&gt;&#34;</span>
</span></span></code></pre></div><p>当然，如果希望每次启动的时候代理配置都生效，可以写入 <code>~/.bashrc</code> 文件中。</p>
<p>顺便一提查看 git 全局配置的命令是：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>git config --global --list
</span></span></code></pre></div><h3 id="v2ray-配置">V2ray 配置</h3>
<p>在设置中要勾选上「允许来自局域网的连接」。</p>
<h2 id="默认-shell-设置">默认 shell 设置</h2>
<p>执行 <code>chsh</code> 命令打开新的 WSL 窗口的时候，默认 shell 仍然没有变化。</p>
<p>还是需要在 <code>~/.bashrc</code> 中加上一行：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>bash -c fish
</span></span></code></pre></div><p>当然如果是 zsh 还是 fish 就随意啦。</p>

                    
                    <HR width="100%" id="EOF">
		    <p style="color:#777;">最后修改于 2021-03-21</p>
                    
                </div>
            </div>
            
            
            <nav class="post-pagination">

                
                <a class="newer-posts" href="/post/multimedia-basics/">
			下回<br>多媒体基础知识
                </a>
                
                
                
                <a class="older-posts" href="/post/dear-diary/">
			上回<br>一部分的日记(2019.9至2020.4)
                </a>
                
            </nav>
            <div class="post-comment-wrapper">
                










            </div>
        </div>
    </div>


                    </div>
            </div><div id="single-column-footer">
Hugo Theme <a href="https://github.com/amazingrise/hugo-theme-diary">Diary</a> by <a href="https://risehere.net/">Rise</a>
<br>
移植自 <a href="https://mak1t0.cc/" target="_blank" rel="noreferrer noopener">Makito</a>'s <a href="https://github.com/SumiMakito/hexo-theme-journal/" target="_blank" rel="noreferrer noopener">Journal.</a> <br>
<br>

&copy;
	
	Faye
	
</div>
            </div>
    
    <script src="/js/journal.js"></script></body>
</html>
